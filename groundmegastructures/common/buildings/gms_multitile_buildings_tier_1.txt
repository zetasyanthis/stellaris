@btfast = 120
@btshort = 240
@btmedium = 360
@btlong = 480
@btgiant = 800

@cost_very_cheap = 100
@cost_cheap = 200
@cost_medium = 250
@cost_expensive = 500
@cost_very_expensive = 1000

building_empire_power_generator = {
	base_buildtime = 3200
	empire_unique = yes
	
	cost = {
		minerals = 15000
		energy = 1000
		influence = 100
	}
	
	prerequisites = {
		"ig_tech_empire_power_generator"
	}
	
	allow = {
		custom_tooltip = {
			fail_text = "requires_planetary_administration"
			planet = {
				OR = {
					has_building = "building_capital_2"
					has_building = "building_capital_3"
					has_building = "building_machine_capital_2"
					has_building = "building_machine_capital_3"
				}
			}
		}
	}
	
	
	
	ai_weight = {
		weight = 35
	}
	
	required_resources = {
		minerals = 10
	}
	
	produced_resources = {
		energy = 125
	}
	
	country_modifier = {
		country_resource_energy_mult = 0.05
		max_energy = 5000
	}
	
	produced_resource_trigger = {
		modifier = {
			any_planet_within_border = {
				any_tile = {
					has_building = "mt_building_generator"
				}
			}
			resources = {
				energy = 25
			}
		}
	}
}

mt_building_matter_converter = {
	planet_unique = yes
	
	potential = {
		planet = {
			planet_has_empire_power_plant = yes
		}
	}
	
	destroy_if = {
		OR = {
			planet = {planet_has_empire_power_plant = no}
			is_next_to_energy_generator = no
		}
		
	}
	
	allow = {
		custom_tooltip = {
			fail_text = "requires_planetary_administration"
			planet = {
				OR = {
					has_building = "building_capital_2"
					has_building = "building_capital_3"
					has_building = "building_machine_capital_2"
					has_building = "building_machine_capital_3"
				}
			}
		}
		custom_tooltip = {
			fail_text = "must_be_attached_to_power_plant"
			tile = {
				is_next_to_energy_generator = yes
			}
		}
	}
	
	
	
	ai_weight = {
		weight = 100
	}
	
	base_buildtime = @btmedium
	
	cost = {
		minerals = @cost_cheap
	}
	
	adjacency_bonus = {
		tile_resource_energy_mult = 0.1
	}
	
	required_resources = {
		energy = 1
	}
	
	planet_modifier = {
		tile_resource_energy_mult = 0.05
		tile_resource_minerals_mult = -0.02
	}
	
	prerequisites = {
		"ig_tech_matter_converter"
	}
}

mt_building_generator = {
	planet_unique = yes
	potential = {
		planet = {
			planet_has_empire_power_plant = yes
		}
	}
	
	destroy_if = {
		OR = {
			planet = {planet_has_empire_power_plant = no}
			is_next_to_energy_generator = no
		}
		
	}
	
	allow = {
		custom_tooltip = {
			fail_text = "requires_planetary_administration"
			planet = {
				OR = {
					has_building = "building_capital_2"
					has_building = "building_capital_3"
					has_building = "building_machine_capital_2"
					has_building = "building_machine_capital_3"
				}
			}
		}
		custom_tooltip = {
			fail_text = "must_be_attached_to_power_plant"
			tile = {
				is_next_to_energy_generator = yes
			}
		}
		
	}
	
	
	
	ai_weight = {
		weight = 100
	}
	
	base_buildtime = @btmedium
	
	cost = {
		minerals = @cost_cheap
	}
	
	produced_resources = {
		energy = 3
	}
	
	adjacency_bonus = {
		tile_resource_energy_mult = 0.05
	}
	
	prerequisites = {
		"ig_tech_generator"
	}
}

mt_building_accommodation = {
	potential = {
		planet = {
			planet_has_empire_power_plant = yes
		}
	}
	
	destroy_if = {
		OR = {
			planet = {planet_has_empire_power_plant = no}
			is_next_to_energy_generator = no
		}
		
	}
	
	allow = {
		custom_tooltip = {
			fail_text = "requires_planetary_administration"
			planet = {
				OR = {
					has_building = "building_capital_2"
					has_building = "building_capital_3"
					has_building = "building_machine_capital_2"
					has_building = "building_machine_capital_3"
				}
			}
		}
		custom_tooltip = {
			fail_text = "must_be_attached_to_power_plant"
			tile = {
				is_next_to_energy_generator = yes
			}
		}
		custom_tooltip = {
			text = "can_be_built_5_times"
			planet = {
				owner = {
					OR = {	
						check_variable = {
							which = ig_acc_built
							value = 2
						}
						check_variable = {
							which = ig_acc_built
							value = 1
						}
						check_variable = {
							which = ig_acc_built
							value = 0
						}
					}
				}
			}
		}
	}
	
	
	
	ai_weight = {
		weight = 100
	}
	
	base_buildtime = @btmedium
	
	cost = {
		minerals = @cost_cheap
	}
	
	planet_modifier = {
		pop_happiness = 0.04
		pop_environment_tolerance = 0.03
		tile_resource_energy_mult = 0.04
	}
	
	country_modifier = {
		pop_growth_speed = 0.025
	}
	
	adjacency_bonus = {
		tile_building_resource_energy_add = 2
	}
	
	required_resources = {
		food = 1
	}
	
	prerequisites = {
		"ig_tech_accommodation"
	}
	
	on_queued = {
		planet = {
			owner = {
				if = {
					limit = {
						check_variable = {
							which = ig_acc_built
							value < 1
						}
					}
					set_variable = {
						which = ig_acc_built
						value = 1
					}
					else = {
						change_variable = {
							which = ig_acc_built
							value = 1
						}
					}
				}
			}
		}
	}
	
	on_unqueued = {
		planet = {
			owner = {
				change_variable = {
					which = ig_acc_built
					value = -1
				}
			}
		}
	}
}

mt_building_researches = {
	potential = {
		planet = {
			planet_has_empire_power_plant = yes
		}
	}
	
	destroy_if = {
		OR = {
			planet = {planet_has_empire_power_plant = no}
			is_next_to_energy_generator = no
		}
		
	}
	
	allow = {
		custom_tooltip = {
			fail_text = "requires_planetary_administration"
			planet = {
				OR = {
					has_building = "building_capital_2"
					has_building = "building_capital_3"
					has_building = "building_machine_capital_2"
					has_building = "building_machine_capital_3"
				}
			}
		}
		custom_tooltip = {
			fail_text = "must_be_attached_to_power_plant"
			tile = {
				is_next_to_energy_generator = yes
			}
		}
		custom_tooltip = {
			text = "can_be_built_5_times"
			planet = {
				owner = {
					OR = {	
						check_variable = {
							which = ig_researches_built
							value = 2
						}
						check_variable = {
							which = ig_researches_built
							value = 1
						}
						check_variable = {
							which = ig_researches_built
							value = 0
						}
					}
				}
			}
		}
		
	}
	
	
	
	ai_weight = {
		weight = 100
	}
	
	base_buildtime = @btlong
	
	cost = {
		minerals = @cost_expensive
	}
	
	adjacency_bonus = {
		tile_building_resource_energy_add = 1
		tile_building_resource_physics_research_add = 1
	}
	
	required_resources = {
		energy = 3
	}
	
	produced_resources = {
		engineering_research = 2
		society_research = 1
		physics_research = 4
	}
	
	country_modifier = {
		category_field_manipulation_research_speed_mult = 0.025
		country_resource_physics_research_mult = 0.01
	}
	
	prerequisites = {
		"ig_tech_researches"
	}
	
	on_queued = {
		planet = {
			owner = {
				if = {
					limit = {
						check_variable = {
							which = ig_researches_built
							value < 1
						}
					}
					set_variable = {
						which = ig_researches_built
						value = 1
					}
					
					else = {
						change_variable = {
							which = ig_researches_built
							value = 1
						}
					}
				}
			}
		}
	}
	
	on_unqueued = {
		planet = {
			owner = {
				change_variable = {
					which = ig_researches_built
					value = -1
				}
			}
		}
	}
}

building_battery = {
	potential = {
		planet = {
			planet_has_empire_power_plant = yes
		}
	}
	
	destroy_if = {
		OR = {
			planet = {planet_has_empire_power_plant = no}
			is_next_to_energy_generator = no
		}
		
	}
	
	allow = {
		custom_tooltip = {
			fail_text = "requires_planetary_administration"
			planet = {
				OR = {
					has_building = "building_capital_2"
					has_building = "building_capital_3"
					has_building = "building_machine_capital_2"
					has_building = "building_machine_capital_3"
				}
			}
		}
		custom_tooltip = {
			fail_text = "must_be_attached_to_power_plant"
			tile = {
				is_next_to_energy_generator = yes
			}
		}
		custom_tooltip = {
			text = "can_be_built_5_times"
			planet = {
				owner = {
					OR = {	
						check_variable = {
							which = ig_battery_built
							value = 2
						}
						check_variable = {
							which = ig_battery_built
							value = 1
						}
						check_variable = {
							which = ig_battery_built
							value = 0
						}
					}
				}
			}
		}
		
	}
	
	
	
	ai_weight = {
		weight = 100
	}
	
	base_buildtime = @btmedium
	
	cost = {
		minerals = @cost_cheap
	}
	
	adjacency_bonus = {
		tile_building_resource_energy_add = 1
	}
	
	country_modifier = {
		max_energy = 10000
	}
	
	prerequisites = {
		"tech_zero_point_power"
	}
	
	on_queued = {
		planet = {
			owner = {
				if = {
					limit = {
						check_variable = {
							which = ig_battery_built
							value < 1
						}
					}
					set_variable = {
						which = ig_battery_built
						value = 1
					}
					
					else = {
						change_variable = {
							which = ig_battery_built
							value = 1
						}
					}
				}
			}
		}
	}
	
	on_unqueued = {
		planet = {
			owner = {
				change_variable = {
					which = ig_battery_built
					value = -1
				}
			}
		}
	}
}